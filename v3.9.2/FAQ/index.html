<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>FAQ · PEtab.jl</title><meta name="title" content="FAQ · PEtab.jl"/><meta property="og:title" content="FAQ · PEtab.jl"/><meta property="twitter:title" content="FAQ · PEtab.jl"/><meta name="description" content="Documentation for PEtab.jl."/><meta property="og:description" content="Documentation for PEtab.jl."/><meta property="twitter:description" content="Documentation for PEtab.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom_theme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PEtab.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Extended Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../petab_simcond/">Simulation conditions</a></li><li><a class="tocitem" href="../petab_preeq_simulations/">Steady-State Simulations (Pre-Equilibration)</a></li><li><a class="tocitem" href="../petab_event/">Events (callbacks, dosages, etc.)</a></li><li><a class="tocitem" href="../petab_cond_specific/">Simulation Condition-Specific Parameters</a></li><li><a class="tocitem" href="../petab_obs_noise/">Noise and Observable Parameters</a></li><li><a class="tocitem" href="../import_petab/">Importing PEtab Standard Format</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Parameter Estimation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../pest_method/">Parameter Estimation Methods</a></li><li><a class="tocitem" href="../pest_plot/">Plotting Estimation Results</a></li><li><a class="tocitem" href="../pest_algs/">Available and Recommended Algorithms</a></li><li><a class="tocitem" href="../pest_select/">Model Selection with PEtab-select</a></li><li><a class="tocitem" href="../pest_custom/">Wrapping Optimization Packages</a></li></ul></li><li><a class="tocitem" href="../inference/">Bayesian Inference</a></li><li><a class="tocitem" href="../API/">API</a></li><li><a class="tocitem" href="../grad_hess_methods/">Gradient and Hessian Methods</a></li><li><a class="tocitem" href="../default_options/">Default Options</a></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">Performance Tips</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../nonstiff_models/">Non-Biology (Non-Stiff) Models</a></li><li><a class="tocitem" href="../Beer/">Condition-Specific Parameters</a></li><li><a class="tocitem" href="../Bachmann/">Adjoint Sensitivity Analysis (Large Models)</a></li></ul></li><li><a class="tocitem" href="../references/">References</a></li><li class="is-active"><a class="tocitem" href>FAQ</a><ul class="internal"><li><a class="tocitem" href="#install_fail"><span>Why do I encounter installation problems?</span></a></li><li><a class="tocitem" href="#How-do-I-check-that-I-implemented-my-parameter-estimation-problem-correctly?"><span>How do I check that I implemented my parameter estimation problem correctly?</span></a></li><li><a class="tocitem" href="#Why-do-I-get-NaN-or-Inf-when-computing-the-objective-function-or-during-parameter-estimation?"><span>Why do I get <code>NaN</code> or <code>Inf</code> when computing the objective function or during parameter estimation?</span></a></li><li><a class="tocitem" href="#Why-do-I-get-the-error-*MethodError:-Cannot-convert-an-object-of-type-Nothing-to-an-object-of-type-Real*?"><span>Why do I get the error <em>MethodError: Cannot convert an object of type Nothing to an object of type Real</em>?</span></a></li><li><a class="tocitem" href="#Why-are-my-parameter-values-(e.g.,-start-guesses)-negative?"><span>Why are my parameter values (e.g., start-guesses) negative?</span></a></li><li><a class="tocitem" href="#I-get-ODE-solver-warnings-during-parameter-estimation,-is-my-model-wrong?"><span>I get ODE-solver warnings during parameter estimation, is my model wrong?</span></a></li><li><a class="tocitem" href="#How-do-I-turn-off-ODE-solver-printing?"><span>How do I turn off ODE solver printing?</span></a></li><li><a class="tocitem" href="#How-do-I-create-a-parameter-estimation-problem-for-an-SBML-model?"><span>How do I create a parameter estimation problem for an SBML model?</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>FAQ</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>FAQ</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/sebapersson/PEtab.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/sebapersson/PEtab.jl/blob/main/docs/src/FAQ.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="FAQ"><a class="docs-heading-anchor" href="#FAQ">Frequently Asked Questions</a><a id="FAQ-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ" title="Permalink"></a></h1><h2 id="install_fail"><a class="docs-heading-anchor" href="#install_fail">Why do I encounter installation problems?</a><a id="install_fail-1"></a><a class="docs-heading-anchor-permalink" href="#install_fail" title="Permalink"></a></h2><p>PEtab.jl is regularly tested on, and should be installable on Linux, macOS and Windows. If you encounter installation issues on these systems, we recommend checking the following two common causes:</p><ol><li>an incorrectly installed or outdated Julia version,  </li><li>outdated package dependencies.</li></ol><p>First, ensure that a supported Julia version is used. PEtab.jl is tested with Julia LTS version <strong>1.10</strong> and the latest stable version. Using an earlier version may result in installation failures. To reliably install and manage Julia versions across operating systems, we strongly recommend using <a href="https://github.com/JuliaLang/juliaup">juliaup</a>. If you are constrained to using an older Julia version, for example on an HPC cluster, and encounter problems, please file an issue on <a href="https://github.com/sebapersson/PEtab.jl/issues">GitHub</a>.</p><p>Second, installation failures may result from outdated versions of PEtab.jl dependencies. For example, if PEtab.jl is installed into the global Julia environment, older versions of other packages may prevent the latest version from being installed. This can cause installation failures or break tutorials and example code. To avoid this, it is recommended to install PEtab.jl in a new, isolated environment. For example, to install it in an environment named <code>petab_project</code>, run the following in the Julia REPL:</p><pre><code class="language-julia hljs">using Pkg
Pkg.activate(&quot;petab_project&quot;)
Pkg.add(&quot;PEtab&quot;)
# Add any additional packages as needed</code></pre><p>If you need to install PEtab.jl into an existing environment and encounter issues, updating all packages may resolve the problem:</p><pre><code class="language-julia hljs">Pkg.update()</code></pre><p>This is because PEtab.jl depends on numerous packages from the actively developing Julia <a href="https://sciml.ai/">SciML ecosystem</a>. New releases of these dependencies sometimes introduce breaking changes that are not always caught by test suites (e.g., see <a href="https://github.com/SciML/Catalyst.jl/issues/1075">this issue</a>). In other words, PEtab.jl is not compatible with all versions of packages like Catalyst.jl, which can cause issues if an incompatible version is already installed in the environment.</p><p>Lastly, if you have tried everything above and still experience installation issues, it is likely a bug in PEtab. In this case, please open an issue on <a href="https://github.com/sebapersson/PEtab.jl">GitHub</a>.</p><h2 id="How-do-I-check-that-I-implemented-my-parameter-estimation-problem-correctly?"><a class="docs-heading-anchor" href="#How-do-I-check-that-I-implemented-my-parameter-estimation-problem-correctly?">How do I check that I implemented my parameter estimation problem correctly?</a><a id="How-do-I-check-that-I-implemented-my-parameter-estimation-problem-correctly?-1"></a><a class="docs-heading-anchor-permalink" href="#How-do-I-check-that-I-implemented-my-parameter-estimation-problem-correctly?" title="Permalink"></a></h2><p>After creating a <code>PEtabODEProblem</code>, it is important to check that everything works as expected. Since PEtab.jl creates parameter estimation problems, this means checking that the objective function (the problem likelihood) is computable, because if not, running parameter estimation will only return <code>NaN</code> or <code>Inf</code>.</p><p>The first step to verify that the likelihood is computable is to check if the objective function can be computed for the nominal parameters:</p><pre><code class="language-julia hljs">x = get_x(petab_prob)
petab_prob.nllh(x)</code></pre><p>The nominal values can be specified when creating a <code>PEtabParameter</code> or in the parameters table if the problem is provided in the PEtab standard format (otherwise, they default to the mean of the parameter bounds). If the problem is correctly specified, the likelihood should be computable for these values. However, sometimes the nominal values can be poor choices (far from the &#39;true&#39; parameters as we do not know them, hence the need for PEtab.jl), and the code above may return <code>Inf</code> because the ODE cannot be solved. If this happens, check if the likelihood can be computed for random parameters:</p><pre><code class="language-julia hljs">get_startguesses(petab_prob, 10)</code></pre><p>Specially, the <a href="../API/#PEtab.get_startguesses"><code>get_startguesses</code></a> function tries to find random parameter vectors for which the likelihood can be computed. If this function fails to return a parameter set, there is likely an issue with the problem formulation.</p><p>If the objective function cannot be computed, check out the tips below. If none of the suggestions help, please file an <a href="https://github.com/sebapersson/PEtab.jl/issues">issue</a> on GitHub.</p><h2 id="Why-do-I-get-NaN-or-Inf-when-computing-the-objective-function-or-during-parameter-estimation?"><a class="docs-heading-anchor" href="#Why-do-I-get-NaN-or-Inf-when-computing-the-objective-function-or-during-parameter-estimation?">Why do I get <code>NaN</code> or <code>Inf</code> when computing the objective function or during parameter estimation?</a><a id="Why-do-I-get-NaN-or-Inf-when-computing-the-objective-function-or-during-parameter-estimation?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-do-I-get-NaN-or-Inf-when-computing-the-objective-function-or-during-parameter-estimation?" title="Permalink"></a></h2><p>Sometimes, when computing the likelihood (<code>petab_prob.nllh(x)</code>) or during parameter estimation, <code>Inf</code> or <code>NaN</code> may be returned. This can be due to several reasons.</p><p><code>Inf</code> is returned when the ODE model cannot be solved. When this happens, a warning like <code>Failed to solve ODE model</code> should be printed. If no ODE solver warning is shown, check that the observable formulas and noise formulas cannot evaluate to <code>Inf</code> (e.g., there are no expressions that can evaluate to <code>log(0)</code>). If neither of these reasons causes <code>Inf</code> to be returned, please file an <a href="https://github.com/sebapersson/PEtab.jl/issues">issue</a> on GitHub. For how to deal with ODE solver warnings, see one of the questions below.</p><p>If <code>NaN</code> is returned, the model formulas are likely ill-formulated. In PEtab.jl, the most common cause of <code>NaN</code> being returned is that <code>log</code> is applied to a negative value, often due to an ill-formulated noise formula. For example, consider the observable <code>h = PEtabObservable(X, sigma * X)</code>, where <code>X</code> is a model species and <code>sigma</code> is a parameter. When computing the objective value (likelihood) for this observable, the <code>log</code> of the noise formula <code>sigma * X</code> is evaluated. Even if the model uses mass-action kinetics and <code>X</code> should never go below zero, in practice, numerical noise during ODE solving can cause <code>X</code> to become negative, leading to a negative argument for <code>log</code>. Therefore, a more stable noise formula than the one above would be <code>sigma1 + sigma2 * X</code>.</p><h2 id="Why-do-I-get-the-error-*MethodError:-Cannot-convert-an-object-of-type-Nothing-to-an-object-of-type-Real*?"><a class="docs-heading-anchor" href="#Why-do-I-get-the-error-*MethodError:-Cannot-convert-an-object-of-type-Nothing-to-an-object-of-type-Real*?">Why do I get the error <em>MethodError: Cannot convert an object of type Nothing to an object of type Real</em>?</a><a id="Why-do-I-get-the-error-*MethodError:-Cannot-convert-an-object-of-type-Nothing-to-an-object-of-type-Real*?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-do-I-get-the-error-*MethodError:-Cannot-convert-an-object-of-type-Nothing-to-an-object-of-type-Real*?" title="Permalink"></a></h2><p>This error likely occurs because some model parameters have not been defined. For example, consider the observable <code>h = PEtabObservable(X, sigma)</code>, where <code>X</code> is a model species and <code>sigma</code> is a parameter. If <code>sigma</code> has not been defined as a <code>PEtabParameter</code>, the above error will be thrown when computing the objective function. This also applies to misspellings. For example, if the observable is defined as <code>h = PEtabObservable(X, sigma1)</code> but only <code>sigma</code> (not <code>sigma1</code>) is defined as a <code>PEtabParameter</code>, the same error will be thrown.</p><h2 id="Why-are-my-parameter-values-(e.g.,-start-guesses)-negative?"><a class="docs-heading-anchor" href="#Why-are-my-parameter-values-(e.g.,-start-guesses)-negative?">Why are my parameter values (e.g., start-guesses) negative?</a><a id="Why-are-my-parameter-values-(e.g.,-start-guesses)-negative?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-are-my-parameter-values-(e.g.,-start-guesses)-negative?" title="Permalink"></a></h2><p>When creating start-guesses for parameter estimation with <a href="../API/#PEtab.get_x"><code>get_x</code></a> or <a href="../API/#PEtab.get_startguesses"><code>get_startguesses</code></a>, the values in the returned vector(s) can sometimes be negative. As discussed in the <a href="../tutorial/#tutorial">starting tutorial</a>, this is because parameters are estimated on the <code>log10</code> scale by default, as this often improves performance. Consequently, when setting new parameter values manually, they should be provided on the parameter scale. It is also possible to change the parameter scale; see <a href="../API/#PEtab.PEtabParameter"><code>PEtabParameter</code></a>.</p><h2 id="I-get-ODE-solver-warnings-during-parameter-estimation,-is-my-model-wrong?"><a class="docs-heading-anchor" href="#I-get-ODE-solver-warnings-during-parameter-estimation,-is-my-model-wrong?">I get ODE-solver warnings during parameter estimation, is my model wrong?</a><a id="I-get-ODE-solver-warnings-during-parameter-estimation,-is-my-model-wrong?-1"></a><a class="docs-heading-anchor-permalink" href="#I-get-ODE-solver-warnings-during-parameter-estimation,-is-my-model-wrong?" title="Permalink"></a></h2><p>When doing parameter estimation, it is not uncommon for the warning <code>Failed to solve ODE model</code> to be thrown a few times. This is because when estimating model parameters with a numerical optimization algorithm that starts from random points in parameter space (e.g., when using <a href="../API/#PEtab.calibrate_multistart"><code>calibrate_multistart</code></a>), poor parameter values that cause difficult dynamics to solve are sometimes generated. However, if the <code>Failed to solve ODE model</code> warning is thrown frequently, there is likely a problem with the model structure, or a suboptimal ODE solver is used. We recommend first checking if the issue is related to the ODE solver.</p><p>A great collection of tips for dealing with different ODE solver warnings can be found <a href="https://docs.sciml.ai/DiffEqDocs/stable/basics/faq/#faq">here</a>. Briefly, it can be helpful to adjust the tolerances in <a href="../API/#PEtab.ODESolver"><code>ODESolver</code></a>, as the default settings are quite strict. Further, if <code>maxiters</code> warnings are thrown, increasing the number of maximum iterations might help. Lastly, it can also be worthwhile to try different ODE solvers. Even though the <a href="../default_options/#default_options">default solver</a> often performs well, every problem is unique. For hard-to-solve models, it can therefore be useful to try solvers like <code>Rodas5P</code>, <code>QNDF</code>, <code>TRBDF2</code>, or <code>KenCarp4</code>.</p><p>If changing ODE solver settings does not help, something may be wrong with the model structure (e.g., the model may not be coded correctly). However, it should also be kept in mind that some models are just hard to solve/simulate. Therefore, even if many warnings are thrown, a multi-start parameter estimation approach can still sometimes find a set of parameters that fits the data well.</p><h2 id="How-do-I-turn-off-ODE-solver-printing?"><a class="docs-heading-anchor" href="#How-do-I-turn-off-ODE-solver-printing?">How do I turn off ODE solver printing?</a><a id="How-do-I-turn-off-ODE-solver-printing?-1"></a><a class="docs-heading-anchor-permalink" href="#How-do-I-turn-off-ODE-solver-printing?" title="Permalink"></a></h2><p>When performing parameter estimation, as discussed above warnings are thrown when the ODE solver fails to solve the underlying ODE model. By default, we do not disable ODE solver warnings, as it can be beneficial to see them. In particular, if warnings are thrown frequently, it may indicate that something is wrong with the model structure (e.g. the model was not coded correctly) or that a sub-optimal (e.g., non-stiff) ODE solver was chosen when a stiff one should be used. Regardless, when running parameter estimation, it might be preferable not to have the terminal cluttered with warnings. You can turn off the warnings by setting the <code>verbose = false</code> option in the <code>ODESolver</code>:</p><pre><code class="language-julia hljs">osolver = ODESolver(Rodas5P(); verbose = false)
petab_prob = PEtabODEProblem(model; odesolver = osolver)</code></pre><p>For which ODE solver to choose when manually setting the <code>ODESolver</code>, see <a href="../default_options/#default_options">this</a> page.</p><h2 id="How-do-I-create-a-parameter-estimation-problem-for-an-SBML-model?"><a class="docs-heading-anchor" href="#How-do-I-create-a-parameter-estimation-problem-for-an-SBML-model?">How do I create a parameter estimation problem for an SBML model?</a><a id="How-do-I-create-a-parameter-estimation-problem-for-an-SBML-model?-1"></a><a class="docs-heading-anchor-permalink" href="#How-do-I-create-a-parameter-estimation-problem-for-an-SBML-model?" title="Permalink"></a></h2><p>If your model is in the <a href="https://sbml.org/">SBML</a> standard format, there are two ways to create a parameter estimation problem:</p><ol><li><p>Formulate the problem in the <a href="https://petab.readthedocs.io/en/latest/">PEtab</a> standard format (recommended). PEtab is a standard format for parameter estimation that assumes the model is in the SBML format. We recommend creating problems in this format, as it allows for the exchange of parameter estimation workflows and is more reproducible. A guide on how to create problems in this standard format can be found <a href="https://petab.readthedocs.io/en/latest/">here</a>, and a tutorial on importing problems can be found <a href="../import_petab/#import_petab_problem">here</a>.</p></li><li><p>Import the model as a <a href="https://github.com/SciML/Catalyst.jl">Catalyst.jl</a> <code>ReactionSystem</code> with <a href="https://github.com/sebapersson/SBMLImporter.jl">SBMLImporter.jl</a> (see the SBMLImporter <a href="https://sebapersson.github.io/SBMLImporter.jl/stable/">documentation</a> for details). As demonstrated in the starting <a href="../tutorial/#tutorial">tutorial</a>, a <code>ReactionSystem</code> is one of the model formats that PEtab.jl accepts for creating a parameter estimation problem directly in Julia.</p></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../references/">« References</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.13.0 on <span class="colophon-date" title="Monday 7 July 2025 20:00">Monday 7 July 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
