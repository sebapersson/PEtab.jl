import{_ as e,c as t,o as i,aA as s}from"./chunks/framework.B-5kZDWZ.js";const c=JSON.parse('{"title":"Import PEtab standard format","description":"","frontmatter":{},"headers":[],"relativePath":"tutorials/define_problem/standard_format.md","filePath":"tutorials/define_problem/standard_format.md","lastUpdated":null}'),r={name:"tutorials/define_problem/standard_format.md"};function n(l,a,p,o,h,d){return i(),t("div",null,[...a[0]||(a[0]=[s(`<h1 id="import_petab_problem" tabindex="-1">Import PEtab standard format <a class="header-anchor" href="#import_petab_problem" aria-label="Permalink to &quot;Import PEtab standard format {#import_petab_problem}&quot;">​</a></h1><p><a href="https://petab.readthedocs.io/en/latest/" target="_blank" rel="noreferrer">PEtab</a>, from which PEtab.jl gets its name, is a flexible, table-based standard for specifying parameter estimation problems [<a href="/PEtab.jl/previews/PR344/references#schmiester2021petab">8</a>]. PEtab.jl has full support for both the PEtab v1 and PEtab v2 format.</p><h2 id="Input:-a-valid-PEtab-problem" tabindex="-1">Input: a valid PEtab problem <a class="header-anchor" href="#Input:-a-valid-PEtab-problem" aria-label="Permalink to &quot;Input: a valid PEtab problem {#Input:-a-valid-PEtab-problem}&quot;">​</a></h2><p>A tutorial on creating valid PEtab problems is available in the PEtab <a href="https://petab.readthedocs.io/en/latest/" target="_blank" rel="noreferrer">documentation</a>, and there is also <a href="https://github.com/PEtab-dev/PEtab-GUI/" target="_blank" rel="noreferrer">PEtab GUI</a> [<a href="/PEtab.jl/previews/PR344/references#jost2025petab">9</a>] for creating problems via a graphical interface. Moreover, a large collection of ready-to-run PEtab problems is provided in the PEtab benchmark <a href="https://github.com/Benchmarking-Initiative/Benchmark-Models-PEtab" target="_blank" rel="noreferrer">repository</a>. In this tutorial, we use the Boehm model [<a href="/PEtab.jl/previews/PR344/references#boehm2014identification">10</a>], which can be downloaded from <a href="https://github.com/sebapersson/PEtab.jl/tree/main/docs/src/assets/boehm" target="_blank" rel="noreferrer">here</a>.</p><h2 id="PEtab-import" tabindex="-1">PEtab import <a class="header-anchor" href="#PEtab-import" aria-label="Permalink to &quot;PEtab import {#PEtab-import}&quot;">​</a></h2><p>A PEtab problem consists of multiple tables (e.g., measurements, parameters to estimate) and a YAML file tying them together. To import a problem, the YAML path is needed:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PEtab</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># path_yaml depends on where the model is saved</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path_yaml </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> joinpath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;boehm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Boehm_JProteomeRes2014.yaml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PEtabModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path_yaml)</span></span></code></pre></div><p>Given a <code>PEtabModel</code>, a <code>PEtabODEProblem</code> can be created:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">petab_prob </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PEtabODEProblem</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">PEtabODEProblem</span><span style="--shiki-light:#0366d6;--shiki-dark:#2188ff;"> boehm</span><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">: 9 parameters to estimate</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">(for more statistics, call \`describe(petab_prob)\`)</span></span></code></pre></div><p>As described in the starting <a href="/PEtab.jl/previews/PR344/tutorial#tutorial">tutorial</a>, this <code>PEtabODEProblem</code> can be used for downstream tasks such as parameter estimation or Bayesian inference.</p><h2 id="Exporting-a-PEtab-problem" tabindex="-1">Exporting a PEtab problem <a class="header-anchor" href="#Exporting-a-PEtab-problem" aria-label="Permalink to &quot;Exporting a PEtab problem {#Exporting-a-PEtab-problem}&quot;">​</a></h2><p>After tasks like parameter estimation, a PEtab problem can be exported in the standard format using <code>export_petab</code>. For example, following multi-start optimization:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fides</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ms_res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> calibrate_multistart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(petab_prob, Fides</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BFGS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292e;--shiki-light-font-weight:bold;--shiki-dark:#e1e4e8;--shiki-dark-font-weight:bold;">PEtabMultistartResult</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  min(f)                = 1.38e+02</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  Parameters estimated  = 9</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  Number of multistarts = 10</span></span>
<span class="line"><span style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;">  Optimiser algorithm   = Fides</span></span></code></pre></div><p>using the best parameters in <code>ms_res</code> a PEtab problem can be exported to a target directory:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dir_export </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> joinpath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@__DIR__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;petab_result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">export_petab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dir_export, petab_prob, ms_res)</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Export requires PEtab standard format input</p><p>Currently <code>export_petab</code> only supports problems that were imported from the PEtab standard format.</p></div><h2 id="What-happens-during-PEtab-import-deep-dive" tabindex="-1">What happens during PEtab import (deep dive) <a class="header-anchor" href="#What-happens-during-PEtab-import-deep-dive" aria-label="Permalink to &quot;What happens during PEtab import (deep dive) {#What-happens-during-PEtab-import-deep-dive}&quot;">​</a></h2><p>During import, PEtab.jl performs the following steps:</p><ol><li><p>The SBML model is converted into a <code>ReactionSystem</code> using <a href="https://github.com/sebapersson/SBMLImporter.jl" target="_blank" rel="noreferrer">SBMLImporter.jl</a>, and then into a <code>ODESystem</code>. The system is symbolically preprocessed (including symbolic Jacobian generation), which typically improves simulation performance.</p></li><li><p>The PEtab observable table is translated into Julia functions for the observables (<code>h</code>), measurement noise/scale (<code>σ</code>), and initial conditions (<code>u0</code>).</p></li><li><p>Any PEtab events are translated into Julia <a href="https://docs.sciml.ai/DiffEqDocs/stable/features/callback_functions/" target="_blank" rel="noreferrer">callbacks</a>.</p></li></ol><p>These steps happen automatically. To inspect the generated code, import with <code>write_to_file = true</code> to have these files written to <code>dir_yaml/Julia_model_files/</code>.</p><h2 id="References" tabindex="-1">References <a class="header-anchor" href="#References" aria-label="Permalink to &quot;References {#References}&quot;">​</a></h2><ol><li><p>L. Schmiester, Y. Schälte, F. T. Bergmann, T. Camba, E. Dudkin, J. Egert, F. Fröhlich, L. Fuhrmann, A. L. Hauber, S. Kemmer and others. <em>PEtab—Interoperable specification of parameter estimation problems in systems biology</em>. PLoS computational biology <strong>17</strong>, e1008646 (2021).</p></li><li><p>P. J. Jost, F. T. Bergmann, D. Weindl and J. Hasenauer. <em>PEtab-GUI: A graphical user interface to create, edit and inspect PEtab parameter estimation problems</em>, arXiv preprint arXiv:2511.11515 (2025).</p></li><li><p>M. E. Boehm, L. Adlung, M. Schilling, S. Roth, U. Klingmüller and W. D. Lehmann. <em>Identification of isoform-specific dynamics in phosphorylation-dependent STAT5 dimerization by quantitative mass spectrometry and mathematical modeling</em>. Journal of proteome research <strong>13</strong>, 5685–5694 (2014).</p></li></ol>`,24)])])}const m=e(r,[["render",n]]);export{c as __pageData,m as default};
